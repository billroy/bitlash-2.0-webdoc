
<h2 class="sectionedit1"><a name="printing_overview" id="printing_overview">Printing Overview</a></h2>
<div class="level2">

<p>
There are two ways to print in Bitlash: the legacy “print” command, and the printf() function.  The “print” command is handy for printing basic values without much formatting control; it was part of Bitlash 1.0 and is partly retained mainly for backwards compatibility.  The ”:x” format specifier language will be deprecated in Bitlash 2.1, leaving only the printing of basic values.
</p>

<p>
The printf() function is new in Bitlash 2.0.  It is more compatible with standard C and much more capable.  It will be the supported printing pathway going forward.
</p>

</div>
<!-- EDIT1 SECTION "Printing Overview" [3-585] -->
<h2 class="sectionedit2"><a name="printf_format_string_value1_value2__valuen" id="printf_format_string_value1_value2__valuen">printf(&quot;format string&quot;, value1, value2,... valueN);</a></h2>
<div class="level2">

<p>
The printf() function prints values to the console.
</p>

<p>
The values are printed under control of a format string, which must contain a specifier for each value to be printed.
</p>

<p>
Specifiers are of the format:
</p>
<pre class="code">Format Specifier := &lt;percent-sign&gt; [[&lt;pad-char&gt;] [&lt;width&gt;]] &lt;specifier&gt;
Example: printf(&quot;%d&quot;, 7)	prints &quot;7&quot;
Example: printf(&quot;%3d&quot;, 7)	prints &quot;  7&quot;
Example: printf(&quot;%03d&quot;, 7)	prints &quot;007&quot;
Example: printf(&quot;%s&quot;,&quot;Hello&quot;)	prints &quot;Hello&quot;
Example: printf(&quot;%%&quot;)		prints &quot;%&quot;</pre>
<hr />

</div>
<!-- EDIT2 SECTION "printf(format string, value1, value2,... valueN);" [586-1140] -->
<h3 class="sectionedit3"><a name="table_of_format_specifiers" id="table_of_format_specifiers">Table of Format Specifiers</a></h3>
<div class="level3">
<div class="table sectionedit4"><table class="inline">
	<tr class="row0">
		<th class="col0">Specifier</th><th class="col1">Print Format</th><th class="col2">Pad</th>
	</tr>
	<tr class="row1">
		<td class="col0">d</td><td class="col1">Decimal, signed</td><td class="col2">blank unless &#039;0&#039; is specified</td>
	</tr>
	<tr class="row2">
		<td class="col0">x</td><td class="col1">Hexadecimal</td><td class="col2">blank unless &#039;0&#039; is specified</td>
	</tr>
	<tr class="row3">
		<td class="col0">u</td><td class="col1">Decimal, unsigned</td><td class="col2">blank unless &#039;0&#039; is specified</td>
	</tr>
	<tr class="row4">
		<td class="col0">b</td><td class="col1">Binary</td><td class="col2">blank unless &#039;0&#039; is specified</td>
	</tr>
	<tr class="row5">
		<td class="col0">s</td><td class="col1">String</td><td class="col2">blank</td>
	</tr>
	<tr class="row6">
		<td class="col0">c</td><td class="col1">Character</td><td class="col2">the char</td>
	</tr>
	<tr class="row7">
		<td class="col0">#</td><td class="col1">Print-to-Pin</td><td class="col2">pin number is the passed value</td>
	</tr>
	<tr class="row8">
		<td class="col0">%</td><td class="col1">Print &#039;%&#039;</td><td class="col2"> </td>
	</tr>
</table></div>
<!-- EDIT4 TABLE [1179-1500] --><hr />

</div>
<!-- EDIT3 SECTION "Table of Format Specifiers" [1141-1506] -->
<h3 class="sectionedit5"><a name="special_characters" id="special_characters">Special Characters</a></h3>
<div class="level3">

<p>
The percent sign signals a format specifier in the string.  To print a percent sign, you must double it:
</p>
<pre class="code">printf(&quot;%%&quot;)	 prints &#039;%&#039;</pre>

<p>
The printf() function does not automatically provide a newline at the end of printed output.  You must indicate line endings using the &#039;\n&#039; character:
</p>
<pre class="code">printf(&quot;The time is: %d\n&quot;, millis);</pre>

<p>
You can specify arbitrary hex values in a string constant using \xHH notation:
</p>
<pre class="code">printf(&quot;\x30&quot;);		prints &#039;0&#039;</pre>

<p>
Here is a summary of the special characters supported by Bitlash:
</p>
<div class="table sectionedit6"><table class="inline">
	<tr class="row0">
		<th class="col0">Char</th><th class="col1">Value</th><th class="col2">Description</th>
	</tr>
	<tr class="row1">
		<td class="col0">\r</td><td class="col1">0d</td><td class="col2">carriage return</td>
	</tr>
	<tr class="row2">
		<td class="col0">\n</td><td class="col1">0a</td><td class="col2">linefeed</td>
	</tr>
	<tr class="row3">
		<td class="col0">\t</td><td class="col1">09</td><td class="col2">tab</td>
	</tr>
	<tr class="row4">
		<td class="col0">\\</td><td class="col1">&#039;\&#039;</td><td class="col2">a backslash</td>
	</tr>
	<tr class="row5">
		<td class="col0">\”</td><td class="col1">&#039;”&#039;</td><td class="col2">a double quote</td>
	</tr>
	<tr class="row6">
		<td class="col0">\xHH</td><td class="col1">???</td><td class="col2">hex character specified by HH</td>
	</tr>
</table></div>
<!-- EDIT6 TABLE [2082-2245] --><hr />

</div>
<!-- EDIT5 SECTION "Special Characters" [1507-2251] -->
<h3 class="sectionedit7"><a name="padding" id="padding">Padding</a></h3>
<div class="level3">

<p>
Normally, numeric values and strings are pre-padded with blanks to fill out the specified field width.  You can pre-pad numeric values with zeroes instead by adding a zero before the width character:
</p>
<pre class="code">printf(&quot;%03d&quot;, 7)	prints &quot;007&quot;</pre>
<hr />

</div>
<!-- EDIT7 SECTION "Padding" [2252-2523] -->
<h3 class="sectionedit8"><a name="the_character_used_as_a_width" id="the_character_used_as_a_width">The &quot;*&quot; character used as a width</a></h3>
<div class="level3">

<p>
If the special character &#039;*&#039; is used in place of a width specifier, the next value in the passed-in value list is used as the width:
</p>
<pre class="code">printf(&quot;%*d&quot;, 3, 7)		prints &quot;  7&quot; - padded to 3 characters with &#039; &#039;</pre>
<hr />

</div>
<!-- EDIT8 SECTION "The * character used as a width" [2524-2791] -->
<h3 class="sectionedit9"><a name="printing_to_alternate_serial_pins" id="printing_to_alternate_serial_pins">Printing to Alternate Serial Pins</a></h3>
<div class="level3">

<p>
You can redirect output to a non-standard serial pin using the &#039;#&#039; specifier, which picks up the pin number to use from the next value in the value list:
</p>
<pre class="code">printf(&quot;%#%d&quot;, 4, 7)	prints &quot;7&quot; to pin 4 at the default 9600 baud</pre>

<p>
It&#039;s a kludge, but the width specifier can be used to override the default 9600 baud sending speed:
</p>
<pre class="code">printf(&quot;%4800#%d&quot;, 4, 7)	prints &quot;7&quot; to pin 4 at 4800 baud</pre>

<p>
Specifying the baud rate in this way has the same effect as calling baud(4,4800): the pin will remain at the indicated baud rate until it is changed again.
</p>

</div>

<h5><a name="accessing_secondary_uarts_with_printf" id="accessing_secondary_uarts_with_printf">Accessing Secondary UARTs with printf</a></h5>
<div class="level5">

<p>
If you are using an Arduino Mega 1280 or Mega 2560 with Bitlash and you print to pin 18 then Bitlash will automatically use the Serial1 UART rather than software serial for I/O.  (There is currently no support in Bitlash for accessing Serial2 or Serial3 from printf.)
</p>

<p>
Likewise if you are using a Sanguino with the AVR ATmega 644P processor, I/O to pin 11 will use the second UART of the Sanguino rather than software serial.
</p>

</div>
<!-- EDIT9 SECTION "Printing to Alternate Serial Pins" [2792-3881] -->
<h2 class="sectionedit10"><a name="the_print_comand" id="the_print_comand">The Print Comand</a></h2>
<div class="level2">

<p>
This section documents the legacy Print command and its options.
</p>

<p>
The print command will be retained in Bitlash going forward, but the ”:x” sublanguage will be deprecated in a future version.  Users are advised to migrate to the printf() function with all due haste.
</p>
<hr />

</div>
<!-- EDIT10 SECTION "The Print Comand" [3882-4184] -->
<h3 class="sectionedit11"><a name="basic_printinga_list_of_items" id="basic_printinga_list_of_items">Basic Printing: a list of items</a></h3>
<div class="level3">

<p>
The simplest form of the print command causes bitlash to print out a bunch of numeric values separated by spaces, followed by a newline:
</p>
<pre class="code">&gt; print 1, 2+2, 1&lt;&lt;3
1 4 8
&gt;</pre>

<p>
The print command can print string constants as well as numeric expressions, as you may recall from the Hello World example:
</p>
<pre class="code">&gt; print &quot;Hello, world!&quot;, 123
Hello, world! 123</pre>

<p>
To suppress the blank and automatic end of line, print a single value followed by the comma, like this:
</p>
<pre class="code">&gt; print &quot;Time:&quot;,		// Prints Time: with no trailing blank or newline</pre>
<hr />

</div>
<!-- EDIT11 SECTION "Basic Printing: a list of items" [4185-4788] -->
<h3 class="sectionedit12"><a name="printing_special_characters" id="printing_special_characters">Printing special characters</a></h3>
<div class="level3">

<p>
The rules for special characters are similar to C.  See <a href="/wiki/language" class="wikilink1" title="language">Language</a> for details on constructing string constants with arbitrary ascii characters.
</p>
<hr />

</div>
<!-- EDIT12 SECTION "Printing special characters" [4789-4980] -->
<h3 class="sectionedit13"><a name="hex_binary_and_raw_byte_output" id="hex_binary_and_raw_byte_output">Hex, binary, and raw byte output</a></h3>
<div class="level3">

<p>
You can specify a modifier to produce several different output types by appending ”:<acronym title="specification">spec</acronym>” to any expression in a print statement.  Perhaps an example is quickest:
</p>
<pre class="code">&gt; print 33, 33:x, 33:b, 33:y, 33:*
33 21 100001 ! *********************************</pre>

<p>
Here is a mapping to the Arduino equivalents for hex, binary, and raw byte output:
</p>
<div class="table sectionedit14"><table class="inline">
	<tr class="row0">
		<th class="col0">to print: </th><th class="col1 leftalign">Bitlash	</th><th class="col2">Arduino </th>
	</tr>
	<tr class="row1">
		<td class="col0"> print hex </td><td class="col1"> print value:x </td><td class="col2"> Serial.print(value, HEX)</td>
	</tr>
	<tr class="row2">
		<td class="col0">send ascii byte value </td><td class="col1"> print value:y </td><td class="col2"> Serial.print(value, BYTE)</td>
	</tr>
	<tr class="row3">
		<td class="col0">print binary </td><td class="col1"> print value:b </td><td class="col2"> Serial.print(value, BIN)</td>
	</tr>
</table></div>
<!-- EDIT14 TABLE [5370-5582] --><hr />

</div>
<!-- EDIT13 SECTION "Hex, binary, and raw byte output" [4981-5589] -->
<h3 class="sectionedit15"><a name="printing_bars" id="printing_bars">Printing Bars</a></h3>
<div class="level3">

<p>
You can print a bar of N &#039;*&#039; characters using the :* format specifier, as shown in the example above.  Any single-byte symbol will work (+-*/&lt;&gt;%:).
Here&#039;s a cheap, low-res oscilloscope on pin A3 with adjustable temporal resolution:
</p>
<pre class="code">&gt; while 1: print map(a3,0,1024,10,50):*; delay(5)</pre>
<hr />

</div>
<!-- EDIT15 SECTION "Printing Bars" [5590-5917] -->
<h3 class="sectionedit16"><a name="serial_output_to_alternate_pinsprint_n" id="serial_output_to_alternate_pinsprint_n">Serial Output to Alternate Pins: print #n:...</a></h3>
<div class="level3">

<p>
Bitlash includes a software serial output capability which supports transmitting on any available output pin at a user-specified baud rate.  This makes it straightforward to integrate additional serial devices with an Arduino.
</p>

<p>
You send output to an alternate output pin using the “print #n:” construct, where “n” is the Arduino pin number designator for the desired the output pin:
</p>
<pre class="code">&gt; print #6:&quot;EMERGENCY DESTRUCT SEQUENCE ALPHA CONFIRMED&quot;</pre>

<p>
By default bitlash will send output at 9600 baud.  If you require a different baud rate use the baud function:
</p>
<pre class="code">&gt; baud(4,4800)	    // set baud on pin 4 to 4800
&gt; print #4:&quot;ATZ&quot;    // send some stuff on pin 4</pre>

<p>
Note: print #n: is blocking: background tasks will pause while output is being printed.
</p>

</div>

<h5><a name="exampleclear_the_screen_on_sparkfun_serial_lcd" id="exampleclear_the_screen_on_sparkfun_serial_lcd">Example: Clear the Screen on Sparkfun Serial LCD</a></h5>
<div class="level5">

<p>
Here is an example combining the use of printing to an arbitrary pin, printing special characters, and (importantly!) suppressing the inter-item and inter-line spacing that bitlash would normally generate.  Assume the serial LCD is on pin 4 and that all pin setup and baud rate initialization has been performed.  Then this macro will clear the screen:
</p>
<pre class="code">function cls {print #4:&quot;\xfe\x01\&quot;,;}</pre>

</div>
<!-- EDIT16 SECTION "Serial Output to Alternate Pins: print #n:..." [5918-] -->